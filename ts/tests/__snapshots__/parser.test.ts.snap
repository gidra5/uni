// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`advent of code 1 single file > flat map list impl 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "flat_map",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "list",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "mapper",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "reduce",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "list",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": "application",
                            },
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "acc",
                                      },
                                      "type": "name",
                                    },
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "item",
                                      },
                                      "type": "name",
                                    },
                                  ],
                                  "data": {},
                                  "type": ",",
                                },
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "acc",
                                              },
                                              "type": "name",
                                            },
                                          ],
                                          "data": {},
                                          "type": "...",
                                        },
                                        {
                                          "children": [
                                            {
                                              "children": [
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": "mapper",
                                                  },
                                                  "type": "name",
                                                },
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": "item",
                                                  },
                                                  "type": "name",
                                                },
                                              ],
                                              "data": {},
                                              "type": "application",
                                            },
                                          ],
                                          "data": {},
                                          "type": "...",
                                        },
                                      ],
                                      "data": {},
                                      "type": ",",
                                    },
                                  ],
                                  "data": {},
                                  "type": "parens",
                                },
                              ],
                              "data": {
                                "isTopFunction": true,
                              },
                              "type": "func",
                            },
                          ],
                          "data": {},
                          "type": "application",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "first",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "second",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": ",",
                            },
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "first",
                                          },
                                          "type": "name",
                                        },
                                      ],
                                      "data": {},
                                      "type": "...",
                                    },
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "second",
                                          },
                                          "type": "name",
                                        },
                                      ],
                                      "data": {},
                                      "type": "...",
                                    },
                                  ],
                                  "data": {},
                                  "type": ",",
                                },
                              ],
                              "data": {},
                              "type": "parens",
                            },
                          ],
                          "data": {
                            "isTopFunction": true,
                          },
                          "type": "func",
                        },
                      ],
                      "data": {},
                      "type": "application",
                    },
                  ],
                  "data": {},
                  "type": "parens",
                },
                {
                  "children": [],
                  "data": {},
                  "type": "implicit_placeholder",
                },
              ],
              "data": {},
              "type": "delimited_application",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`advent of code 1 single file > flat map list reducer 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "acc",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "item",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "acc",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "...",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "mapper",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "item",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": "application",
                    },
                  ],
                  "data": {},
                  "type": "...",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`advent of code 1 single file > fn multiple args 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "acc",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "item",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [
            {
              "children": [],
              "data": {},
              "type": "implicit_placeholder",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`advent of code 1 single file > parse numbers 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "numbers",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "flat_map",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "lines",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "application",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "line",
                  },
                  "type": "name",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "digits",
                          },
                          "type": "name",
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {},
                              "type": "implicit_placeholder",
                            },
                          ],
                          "data": {},
                          "type": "parens",
                        },
                      ],
                      "data": {},
                      "type": ":=",
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "line",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "",
                              },
                              "type": "string",
                            },
                          ],
                          "data": {},
                          "type": "!=",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [
                                            {
                                              "children": [
                                                {
                                                  "children": [
                                                    {
                                                      "children": [],
                                                      "data": {
                                                        "value": "char_at",
                                                      },
                                                      "type": "name",
                                                    },
                                                    {
                                                      "children": [],
                                                      "data": {
                                                        "value": "line",
                                                      },
                                                      "type": "name",
                                                    },
                                                  ],
                                                  "data": {},
                                                  "type": "application",
                                                },
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": 0,
                                                  },
                                                  "type": "number",
                                                },
                                              ],
                                              "data": {},
                                              "type": "application",
                                            },
                                          ],
                                          "data": {},
                                          "type": "parens",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "name": "matchRegexp",
                                          },
                                          "type": "atom",
                                        },
                                      ],
                                      "data": {},
                                      "type": "index",
                                    },
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "d",
                                      },
                                      "type": "string",
                                    },
                                  ],
                                  "data": {},
                                  "type": "application",
                                },
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "digit",
                                          },
                                          "type": "name",
                                        },
                                        {
                                          "children": [
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "number",
                                              },
                                              "type": "name",
                                            },
                                            {
                                              "children": [
                                                {
                                                  "children": [
                                                    {
                                                      "children": [],
                                                      "data": {
                                                        "value": "char_at",
                                                      },
                                                      "type": "name",
                                                    },
                                                    {
                                                      "children": [],
                                                      "data": {
                                                        "value": "line",
                                                      },
                                                      "type": "name",
                                                    },
                                                  ],
                                                  "data": {},
                                                  "type": "application",
                                                },
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": 0,
                                                  },
                                                  "type": "number",
                                                },
                                              ],
                                              "data": {},
                                              "type": "application",
                                            },
                                          ],
                                          "data": {},
                                          "type": "delimited_application",
                                        },
                                      ],
                                      "data": {},
                                      "type": ":=",
                                    },
                                    {
                                      "children": [
                                        {
                                          "children": [
                                            {
                                              "children": [
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": "digits",
                                                  },
                                                  "type": "name",
                                                },
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": 0,
                                                  },
                                                  "type": "number",
                                                },
                                              ],
                                              "data": {},
                                              "type": "index",
                                            },
                                          ],
                                          "data": {},
                                          "type": "not",
                                        },
                                        {
                                          "children": [
                                            {
                                              "children": [
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": "digits",
                                                  },
                                                  "type": "name",
                                                },
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": 0,
                                                  },
                                                  "type": "number",
                                                },
                                              ],
                                              "data": {},
                                              "type": "index",
                                            },
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "digit",
                                              },
                                              "type": "name",
                                            },
                                          ],
                                          "data": {},
                                          "type": "=",
                                        },
                                      ],
                                      "data": {},
                                      "type": "if",
                                    },
                                    {
                                      "children": [
                                        {
                                          "children": [
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "digits",
                                              },
                                              "type": "name",
                                            },
                                            {
                                              "children": [],
                                              "data": {
                                                "value": 1,
                                              },
                                              "type": "number",
                                            },
                                          ],
                                          "data": {},
                                          "type": "index",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "digit",
                                          },
                                          "type": "name",
                                        },
                                      ],
                                      "data": {},
                                      "type": "=",
                                    },
                                  ],
                                  "data": {},
                                  "type": "sequence",
                                },
                              ],
                              "data": {},
                              "type": "if",
                            },
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {},
                                          "type": "placeholder",
                                        },
                                        {
                                          "children": [
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "line",
                                              },
                                              "type": "name",
                                            },
                                          ],
                                          "data": {},
                                          "type": "...",
                                        },
                                      ],
                                      "data": {},
                                      "type": ",",
                                    },
                                  ],
                                  "data": {},
                                  "type": "parens",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "line",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": "=",
                            },
                          ],
                          "data": {},
                          "type": "sequence",
                        },
                      ],
                      "data": {},
                      "type": "while",
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "digits",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 0,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "index",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "digits",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": 1,
                                  },
                                  "type": "number",
                                },
                              ],
                              "data": {},
                              "type": "index",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 10,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "*",
                        },
                      ],
                      "data": {},
                      "type": ",",
                    },
                  ],
                  "data": {},
                  "type": "sequence",
                },
              ],
              "data": {
                "isTopFunction": true,
              },
              "type": "func",
            },
          ],
          "data": {},
          "type": "application",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`advent of code 1 single file > reduce list 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "reduce",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "list",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "reducer",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "merge",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "initial",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "len",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "length",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "list",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": "application",
                    },
                  ],
                  "data": {},
                  "type": ":=",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "len",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": 0,
                          },
                          "type": "number",
                        },
                      ],
                      "data": {},
                      "type": "==",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "return",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "initial",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": "application",
                    },
                  ],
                  "data": {},
                  "type": "if",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "midpoint",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "floor",
                          },
                          "type": "name",
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "len",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 2,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "/",
                        },
                      ],
                      "data": {},
                      "type": "delimited_application",
                    },
                  ],
                  "data": {},
                  "type": ":=",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "item",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "list",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "midpoint",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": "index",
                    },
                  ],
                  "data": {},
                  "type": ":=",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "first",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "second",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": ",",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "all",
                          },
                          "type": "name",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [
                                            {
                                              "children": [
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": "reduce",
                                                  },
                                                  "type": "name",
                                                },
                                                {
                                                  "children": [
                                                    {
                                                      "children": [],
                                                      "data": {
                                                        "value": "slice",
                                                      },
                                                      "type": "name",
                                                    },
                                                    {
                                                      "children": [
                                                        {
                                                          "children": [],
                                                          "data": {
                                                            "value": "list",
                                                          },
                                                          "type": "name",
                                                        },
                                                        {
                                                          "children": [],
                                                          "data": {
                                                            "value": 0,
                                                          },
                                                          "type": "number",
                                                        },
                                                        {
                                                          "children": [],
                                                          "data": {
                                                            "value": "midpoint",
                                                          },
                                                          "type": "name",
                                                        },
                                                      ],
                                                      "data": {},
                                                      "type": ",",
                                                    },
                                                  ],
                                                  "data": {},
                                                  "type": "delimited_application",
                                                },
                                              ],
                                              "data": {},
                                              "type": "application",
                                            },
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "reducer",
                                              },
                                              "type": "name",
                                            },
                                          ],
                                          "data": {},
                                          "type": "application",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "merge",
                                          },
                                          "type": "name",
                                        },
                                      ],
                                      "data": {},
                                      "type": "application",
                                    },
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "initial",
                                      },
                                      "type": "name",
                                    },
                                  ],
                                  "data": {},
                                  "type": "application",
                                },
                              ],
                              "data": {},
                              "type": "parens",
                            },
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [
                                            {
                                              "children": [
                                                {
                                                  "children": [],
                                                  "data": {
                                                    "value": "reduce",
                                                  },
                                                  "type": "name",
                                                },
                                                {
                                                  "children": [
                                                    {
                                                      "children": [],
                                                      "data": {
                                                        "value": "slice",
                                                      },
                                                      "type": "name",
                                                    },
                                                    {
                                                      "children": [
                                                        {
                                                          "children": [],
                                                          "data": {
                                                            "value": "list",
                                                          },
                                                          "type": "name",
                                                        },
                                                        {
                                                          "children": [
                                                            {
                                                              "children": [],
                                                              "data": {
                                                                "value": "midpoint",
                                                              },
                                                              "type": "name",
                                                            },
                                                            {
                                                              "children": [],
                                                              "data": {
                                                                "value": 1,
                                                              },
                                                              "type": "number",
                                                            },
                                                          ],
                                                          "data": {},
                                                          "type": "add",
                                                        },
                                                      ],
                                                      "data": {},
                                                      "type": ",",
                                                    },
                                                  ],
                                                  "data": {},
                                                  "type": "delimited_application",
                                                },
                                              ],
                                              "data": {},
                                              "type": "application",
                                            },
                                            {
                                              "children": [],
                                              "data": {
                                                "value": "reducer",
                                              },
                                              "type": "name",
                                            },
                                          ],
                                          "data": {},
                                          "type": "application",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "merge",
                                          },
                                          "type": "name",
                                        },
                                      ],
                                      "data": {},
                                      "type": "application",
                                    },
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "initial",
                                      },
                                      "type": "name",
                                    },
                                  ],
                                  "data": {},
                                  "type": "application",
                                },
                              ],
                              "data": {},
                              "type": "parens",
                            },
                          ],
                          "data": {},
                          "type": "parallel",
                        },
                      ],
                      "data": {},
                      "type": "delimited_application",
                    },
                  ],
                  "data": {},
                  "type": ":=",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "merge",
                          },
                          "type": "name",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "reducer",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "first",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": "application",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "item",
                              },
                              "type": "name",
                            },
                          ],
                          "data": {},
                          "type": "application",
                        },
                      ],
                      "data": {},
                      "type": "delimited_application",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "second",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "application",
                },
              ],
              "data": {},
              "type": "sequence",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`advent of code 1 single file > split lines 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "lines",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "lines",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "split",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "document",
                              },
                              "type": "name",
                            },
                          ],
                          "data": {},
                          "type": "application",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "
",
                          },
                          "type": "string",
                        },
                      ],
                      "data": {},
                      "type": "application",
                    },
                  ],
                  "data": {},
                  "type": ":=",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "lines",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "map",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "lines",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": "application",
                            },
                          ],
                          "data": {},
                          "type": "parens",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "replace",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "w+",
                                  },
                                  "type": "string",
                                },
                              ],
                              "data": {},
                              "type": "application",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "",
                              },
                              "type": "string",
                            },
                          ],
                          "data": {},
                          "type": "application",
                        },
                      ],
                      "data": {},
                      "type": "delimited_application",
                    },
                  ],
                  "data": {},
                  "type": "=",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "lines",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "filter",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "lines",
                              },
                              "type": "name",
                            },
                          ],
                          "data": {},
                          "type": "application",
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "line",
                              },
                              "type": "name",
                            },
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "line",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "",
                                  },
                                  "type": "string",
                                },
                              ],
                              "data": {},
                              "type": "!=",
                            },
                          ],
                          "data": {
                            "isTopFunction": true,
                          },
                          "type": "func",
                        },
                      ],
                      "data": {},
                      "type": "application",
                    },
                  ],
                  "data": {},
                  "type": "=",
                },
              ],
              "data": {},
              "type": "sequence",
            },
          ],
          "data": {},
          "type": "block",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`advent of code 1 single file > variable 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "document",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "1abc2
pqr3stu8vwx
a1b2c3d4e5f
treb7uchet",
          },
          "type": "string",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > arithmetics > -(a+b) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "add",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "minus",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > arithmetics > complex 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": 2,
                              },
                              "type": "number",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 2,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "pow",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": 5,
                          },
                          "type": "number",
                        },
                      ],
                      "data": {},
                      "type": "subtract",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 7,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": "add",
                },
              ],
              "data": {},
              "type": "parens",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "i",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "minus",
                },
              ],
              "data": {},
              "type": "parens",
            },
          ],
          "data": {},
          "type": "subtract",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "j",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "parens",
                },
                {
                  "children": [],
                  "data": {
                    "value": 0,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "/",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": 1,
                          },
                          "type": "number",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "f",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": "*",
                    },
                  ],
                  "data": {},
                  "type": "parens",
                },
              ],
              "data": {},
              "type": "*",
            },
          ],
          "data": {},
          "type": "subtract",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": 27,
                      },
                      "type": "number",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "subtract",
                },
              ],
              "data": {},
              "type": "parens",
            },
            {
              "children": [],
              "data": {
                "value": "q",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "/",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "send",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": 2,
                                  },
                                  "type": "number",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": 7,
                                  },
                                  "type": "number",
                                },
                              ],
                              "data": {},
                              "type": "add",
                            },
                          ],
                          "data": {},
                          "type": "parens",
                        },
                      ],
                      "data": {},
                      "type": "minus",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "A",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "/",
                },
                {
                  "children": [],
                  "data": {
                    "value": "j",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "i",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 127,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "delimited_application",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "/",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > arithmetics > order of application 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": 2,
                      },
                      "type": "number",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": 3,
                          },
                          "type": "number",
                        },
                      ],
                      "data": {},
                      "type": "minus",
                    },
                  ],
                  "data": {},
                  "type": "pow",
                },
                {
                  "children": [],
                  "data": {
                    "value": 4,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "*",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 5,
                  },
                  "type": "number",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": 6,
                      },
                      "type": "number",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 7,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": "%",
                },
              ],
              "data": {},
              "type": "/",
            },
          ],
          "data": {},
          "type": "subtract",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > boolean expressions > "and", "or" and "not" associativity 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "c",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "and",
        },
        {
          "children": [],
          "data": {
            "value": "d",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "e",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "not",
            },
            {
              "children": [],
              "data": {
                "value": "f",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "g",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "and",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "h",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "not",
        },
        {
          "children": [],
          "data": {
            "value": "i",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "or",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > boolean expressions > in operator 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "name": "key",
              },
              "type": "atom",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "in",
        },
        {
          "children": [],
          "data": {
            "value": "y",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "and",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > boolean expressions > not 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "not",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > async 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "f",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "application",
        },
      ],
      "data": {},
      "type": "async",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > async index 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "f",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "name": "a",
              },
              "type": "atom",
            },
          ],
          "data": {},
          "type": "index",
        },
      ],
      "data": {},
      "type": "async",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > await 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "await",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > await async 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "f",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "application",
            },
          ],
          "data": {},
          "type": "async",
        },
      ],
      "data": {},
      "type": "await",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > channel receive 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "c",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "receive",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > channel send 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "c",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "send",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > channel try receive 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "c",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "<-?",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > channel try send 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "c",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "?<-",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > parallel value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "parallel",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > parallel with channels 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "c",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 123,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "send",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "c",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "receive",
        },
      ],
      "data": {},
      "type": "parallel",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > prefix parallel with code after 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
      ],
      "data": {},
      "type": "block",
    },
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "numbers",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "channel",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {},
              "type": "implicit_placeholder",
            },
          ],
          "data": {},
          "type": "delimited_application",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > select channels 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "c1",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "c2",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > superposition value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "superposition",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > concurrent programming > try receive with assignment 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "status",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "numbers",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "<-?",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > (-(2+7)/A,j, i, 127.0 ) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": 2,
                              },
                              "type": "number",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 7,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "add",
                        },
                      ],
                      "data": {},
                      "type": "parens",
                    },
                  ],
                  "data": {},
                  "type": "minus",
                },
                {
                  "children": [],
                  "data": {
                    "value": "A",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "/",
            },
            {
              "children": [],
              "data": {
                "value": "j",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "i",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 127,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "parens",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > field assignment 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "name": "y",
              },
              "type": "atom",
            },
          ],
          "data": {},
          "type": "index",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > field assignment dynamic 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "index",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > index 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 0,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "index",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > period operator 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "math",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "name": "floor",
          },
          "type": "atom",
        },
      ],
      "data": {},
      "type": "index",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > record 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ":",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ":",
        },
      ],
      "data": {},
      "type": "object",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > record dynamic 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "string",
                },
              ],
              "data": {},
              "type": "square_brackets",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ":",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ":",
        },
      ],
      "data": {},
      "type": "object",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > record single 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ":",
        },
      ],
      "data": {},
      "type": "object",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > tuple 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "list",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "reducer",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "merge",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "initial",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": ",",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > data structures > unit 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
      ],
      "data": {},
      "type": "parens",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > effect handlers > complex 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":",
            },
          ],
          "data": {},
          "type": "object",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "a",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
                {
                  "children": [],
                  "data": {
                    "value": "handlers",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ":=",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "a",
                          },
                          "type": "name",
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "a",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 1,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "add",
                        },
                      ],
                      "data": {},
                      "type": ":",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "b",
                          },
                          "type": "name",
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "b",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 2,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "add",
                        },
                      ],
                      "data": {},
                      "type": ":",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "name": "a",
                      },
                      "type": "atom",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "name": "b",
                          },
                          "type": "atom",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "a",
                                      },
                                      "type": "name",
                                    },
                                  ],
                                  "data": {},
                                  "type": "object",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "handlers",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": ":=",
                            },
                            {
                              "children": [
                                {
                                  "children": [],
                                  "data": {
                                    "value": "a",
                                  },
                                  "type": "name",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": 1,
                                  },
                                  "type": "number",
                                },
                              ],
                              "data": {},
                              "type": "add",
                            },
                          ],
                          "data": {},
                          "type": "sequence",
                        },
                      ],
                      "data": {},
                      "type": "without",
                    },
                  ],
                  "data": {},
                  "type": "mask",
                },
              ],
              "data": {},
              "type": "inject",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "inject",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > effect handlers > inject 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":",
            },
          ],
          "data": {},
          "type": "object",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "inject",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > effect handlers > mask 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "name": "a",
              },
              "type": "atom",
            },
            {
              "children": [],
              "data": {
                "name": "b",
              },
              "type": "atom",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "mask",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > effect handlers > without 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "name": "a",
              },
              "type": "atom",
            },
            {
              "children": [],
              "data": {
                "name": "b",
              },
              "type": "atom",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "without",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > (send 1 2)(2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "send",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 1,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": "application",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "application",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > (send 1)(2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "send",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "application",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > (send)(2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "send",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > a + send (2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "send",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
                {
                  "children": [],
                  "data": {
                    "value": 3,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "delimited_application",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > a + send 1 + 2 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "send",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "application",
        },
        {
          "children": [],
          "data": {
            "value": 2,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > block as last arg 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "open",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "file",
              },
              "type": "string",
            },
          ],
          "data": {},
          "type": "application",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "write",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "yolo",
                  },
                  "type": "string",
                },
              ],
              "data": {},
              "type": "application",
            },
          ],
          "data": {},
          "type": "block",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > function as last arg 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "open",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "file",
              },
              "type": "string",
            },
          ],
          "data": {},
          "type": "application",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "file",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "write",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "file",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "application",
                },
                {
                  "children": [],
                  "data": {
                    "value": "yolo",
                  },
                  "type": "string",
                },
              ],
              "data": {},
              "type": "application",
            },
          ],
          "data": {},
          "type": "func",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > function call 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > function call multiple args 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "f",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "application",
        },
        {
          "children": [],
          "data": {
            "value": "y",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > function call param with field 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "name": "y",
              },
              "type": "atom",
            },
          ],
          "data": {},
          "type": "index",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > methods chaining 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "math",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "name": "floor",
                      },
                      "type": "atom",
                    },
                  ],
                  "data": {},
                  "type": "index",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "delimited_application",
            },
            {
              "children": [],
              "data": {
                "name": "multiply",
              },
              "type": "atom",
            },
          ],
          "data": {},
          "type": "index",
        },
        {
          "children": [],
          "data": {
            "value": 2,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > pipe 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "add",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "y",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "*",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {},
      "type": "|>",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > send 1 (2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "send",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
                {
                  "children": [],
                  "data": {
                    "value": 3,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "delimited_application",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > send 1 + 2 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "send",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "application",
        },
        {
          "children": [],
          "data": {
            "value": 2,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > send a (2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "send",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
                {
                  "children": [],
                  "data": {
                    "value": 3,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "delimited_application",
        },
      ],
      "data": {},
      "type": "application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > send((1+2), 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "send",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": 1,
                      },
                      "type": "number",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 2,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": "add",
                },
              ],
              "data": {},
              "type": "parens",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > application > send(2, 3) 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "send",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > arrow function 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > arrow function with parameter type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "number",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ":",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > delimited application > delimited args 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > delimited application > named args 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "y",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > delimited application > placeholder arg 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {},
              "type": "placeholder",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > delimited application > placeholder args 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {},
              "type": "placeholder",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {},
              "type": "placeholder",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > delimited application > spread args 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "f",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "...",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
      ],
      "data": {},
      "type": "delimited_application",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > fn increment 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "line_handled_count",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "post_increment",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > fn no parameters 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > fn no parameters block 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function block body 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function forms > block form 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function forms > immediate form 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
    {
      "children": [],
      "data": {
        "value": "y",
      },
      "type": "name",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function forms > rest form 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function multiple params 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with deep shadowed name access 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "count": 2,
                    "name": "a",
                  },
                  "type": "hash_name",
                },
              ],
              "data": {
                "isTopFunction": true,
              },
              "type": "func",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with named params from local scope expression 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {},
                  "type": "implicit_placeholder",
                },
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "%",
            },
          ],
          "data": {
            "cause": [Error: infix/postfix operator in prefix position],
          },
          "type": "error",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {},
                      "type": "implicit_placeholder",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "y",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "%",
                },
              ],
              "data": {
                "cause": [Error: infix/postfix operator in prefix position],
              },
              "type": "error",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {},
                      "type": "implicit_placeholder",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "%",
                },
              ],
              "data": {
                "cause": [Error: infix/postfix operator in prefix position],
              },
              "type": "error",
            },
          ],
          "data": {},
          "type": "/",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with no arg 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "implicit_placeholder",
        },
        {
          "children": [],
          "data": {
            "index": 0,
          },
          "type": "hash_name",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with parameter types 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "number",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": ":",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "y",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "string",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": ":",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [],
          "data": {
            "value": "number",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with placeholder arg 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {},
          "type": "placeholder",
        },
        {
          "children": [],
          "data": {
            "index": 0,
          },
          "type": "hash_name",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with return type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [],
          "data": {
            "value": "number",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > function expressions > function with shadowed name access 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "count": 1,
                "name": "a",
              },
              "type": "hash_name",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {
        "isTopFunction": true,
      },
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > block 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > block sequence 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 123,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 234,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 345,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 456,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > complex 1 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "y",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 25,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": ":=",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "x",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": 0,
                              },
                              "type": "number",
                            },
                          ],
                          "data": {},
                          "type": "<",
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "break",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "x",
                              },
                              "type": "name",
                            },
                          ],
                          "data": {},
                          "type": "application",
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "y",
                                      },
                                      "type": "name",
                                    },
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "x",
                                      },
                                      "type": "name",
                                    },
                                  ],
                                  "data": {},
                                  "type": ":=",
                                },
                                {
                                  "children": [
                                    {
                                      "children": [],
                                      "data": {
                                        "value": "x",
                                      },
                                      "type": "name",
                                    },
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "x",
                                          },
                                          "type": "name",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "value": 1,
                                          },
                                          "type": "number",
                                        },
                                      ],
                                      "data": {},
                                      "type": "subtract",
                                    },
                                  ],
                                  "data": {},
                                  "type": "=",
                                },
                                {
                                  "children": [
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "y",
                                          },
                                          "type": "name",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "value": 19,
                                          },
                                          "type": "number",
                                        },
                                      ],
                                      "data": {},
                                      "type": "==",
                                    },
                                    {
                                      "children": [
                                        {
                                          "children": [],
                                          "data": {
                                            "value": "continue",
                                          },
                                          "type": "name",
                                        },
                                        {
                                          "children": [],
                                          "data": {
                                            "value": 69,
                                          },
                                          "type": "number",
                                        },
                                      ],
                                      "data": {},
                                      "type": "application",
                                    },
                                  ],
                                  "data": {},
                                  "type": "if",
                                },
                                {
                                  "children": [],
                                  "data": {
                                    "value": "y",
                                  },
                                  "type": "name",
                                },
                              ],
                              "data": {},
                              "type": "sequence",
                            },
                          ],
                          "data": {},
                          "type": "block",
                        },
                      ],
                      "data": {},
                      "type": "if_else",
                    },
                  ],
                  "data": {},
                  "type": "loop",
                },
              ],
              "data": {},
              "type": "sequence",
            },
          ],
          "data": {},
          "type": "block",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > for loop 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
                {
                  "children": [],
                  "data": {
                    "value": 3,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "for",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > if-then 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > if-then-else 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > if-then-elseif-then-else 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "false",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 789,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 456,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "if_else",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > increment 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "++",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > labeled expression 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {
        "name": "label",
      },
      "type": "::",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > loop 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "loop",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > loop scope 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "block",
        },
      ],
      "data": {},
      "type": "loop",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > parens sequence 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 123,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 234,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 345,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 456,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "parens",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > post increment 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "post_increment",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > semicolon at the end 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": 1,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > sequence 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": 123,
      },
      "type": "number",
    },
    {
      "children": [],
      "data": {
        "value": 234,
      },
      "type": "number",
    },
    {
      "children": [],
      "data": {
        "value": 345,
      },
      "type": "number",
    },
    {
      "children": [],
      "data": {
        "value": 456,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > statement forms > block form 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > statement forms > immediate form 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if",
    },
    {
      "children": [],
      "data": {
        "value": 456,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > statement forms > rest form 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 123,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 456,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "if",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > structured programming > while loop 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "while",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > values > atom 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "name": "atom",
      },
      "type": "atom",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > values > float 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": 123.456,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > values > integer 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": 123,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > values > string 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": "string",
      },
      "type": "string",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`expressions > values > string template 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "string ",
          },
          "type": "string",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": " string",
          },
          "type": "string",
        },
      ],
      "data": {},
      "type": "template",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > block newline at the beginning 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > block newline at the end 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > block newline in the middle 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > block semicolon newline 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > block semicolon newline at the end 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": ":=",
            },
          ],
          "data": {},
          "type": "sequence",
        },
      ],
      "data": {},
      "type": "block",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > chaining 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "name": "b",
          },
          "type": "atom",
        },
      ],
      "data": {},
      "type": "index",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > empty switch with newline 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "match",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > for loop newline 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": ",",
        },
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "for",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > if else separate lines 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 2,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > if-then newline 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > if-then newline-else 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > if-then newline-else newline 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > if-then post newline 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > if-then post newline block 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "true",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 456,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "if_else",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > infix-infix 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "b",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "c",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "d",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > infix-prefix 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "b",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "not",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > newline at the end 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": 1,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > no parens 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 2,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 3,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "add",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > parallel 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [],
          "data": {
            "value": 2,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": "parallel",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > parallel parens 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "parallel",
        },
      ],
      "data": {},
      "type": "parens",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > parens 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {},
      "type": "parens",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > pipe 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "add",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "y",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 2,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "*",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {},
      "type": "|>",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > prefix 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "not",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`newline handling > semicolon-newline at the end 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "value": 1,
      },
      "type": "number",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > binding visible in scope where it is true 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "a",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": ",",
                },
              ],
              "data": {},
              "type": "parens",
            },
          ],
          "data": {},
          "type": "is",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "add",
            },
          ],
          "data": {},
          "type": "==",
        },
      ],
      "data": {},
      "type": "and",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > declare record pattern 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
        {
          "children": [],
          "data": {
            "value": "handlers",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > in function parameters 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "x",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "y",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > match 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "a",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "match_case",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": 2,
              },
              "type": "number",
            },
            {
              "children": [],
              "data": {
                "value": 3,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "match_case",
        },
        {
          "children": [
            {
              "children": [],
              "data": {},
              "type": "placeholder",
            },
            {
              "children": [],
              "data": {
                "value": 4,
              },
              "type": "number",
            },
          ],
          "data": {},
          "type": "match_case",
        },
      ],
      "data": {},
      "type": "match",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > record pattern with type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "number",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ":",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > set-theoretic patterns > pattern intersection 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "y",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "z",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
              ],
              "data": {},
              "type": "and",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "z",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > set-theoretic patterns > pattern negation 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "y",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
              ],
              "data": {},
              "type": "not",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "y",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "z",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "add",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > set-theoretic patterns > pattern union 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "x",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "y",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "y",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "z",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "object",
                },
              ],
              "data": {},
              "type": "or",
            },
          ],
          "data": {},
          "type": "parens",
        },
        {
          "children": [],
          "data": {
            "value": "y",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "func",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > value is of type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "number",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "type",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with 'is' operator 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with constant value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": 1,
                  },
                  "type": "number",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with default value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 4,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": "=",
                },
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with default value parens 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "b",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": 4,
                          },
                          "type": "number",
                        },
                      ],
                      "data": {},
                      "type": "=",
                    },
                  ],
                  "data": {},
                  "type": "parens",
                },
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with default value second 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": 4,
                      },
                      "type": "number",
                    },
                  ],
                  "data": {},
                  "type": "=",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with dynamic name 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "name": "a",
                  },
                  "type": "atom",
                },
              ],
              "data": {},
              "type": "square_brackets",
            },
          ],
          "data": {},
          "type": "is",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "name": "a",
                  },
                  "type": "atom",
                },
              ],
              "data": {},
              "type": "square_brackets",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "==",
        },
      ],
      "data": {},
      "type": "and",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with dynamically nested value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "index",
            },
          ],
          "data": {},
          "type": "is",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "index",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "==",
        },
      ],
      "data": {},
      "type": "and",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with like pattern 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "object",
            },
          ],
          "data": {},
          "type": "like",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with matcher 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "some",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "parens",
            },
          ],
          "data": {},
          "type": "application",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with merging nested value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "a",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "name": "b",
                          },
                          "type": "atom",
                        },
                      ],
                      "data": {},
                      "type": "index",
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "a",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "name": "c",
                          },
                          "type": "atom",
                        },
                      ],
                      "data": {},
                      "type": "index",
                    },
                  ],
                  "data": {},
                  "type": "and",
                },
              ],
              "data": {},
              "type": "parens",
            },
          ],
          "data": {},
          "type": "is",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "name": "b",
                  },
                  "type": "atom",
                },
              ],
              "data": {},
              "type": "index",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "==",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "name": "c",
                  },
                  "type": "atom",
                },
              ],
              "data": {},
              "type": "index",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "==",
        },
      ],
      "data": {},
      "type": "and",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with name for match 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "a",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "b",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": ",",
                    },
                  ],
                  "data": {},
                  "type": "parens",
                },
                {
                  "children": [],
                  "data": {
                    "value": "c",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "@",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with nested value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "name": "b",
                  },
                  "type": "atom",
                },
              ],
              "data": {},
              "type": "index",
            },
          ],
          "data": {},
          "type": "is",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "name": "b",
                  },
                  "type": "atom",
                },
              ],
              "data": {},
              "type": "index",
            },
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "==",
        },
      ],
      "data": {},
      "type": "and",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with parens matcher 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "some",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "application",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with pin 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "a",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "pin",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with pin expression 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "a",
                              },
                              "type": "name",
                            },
                            {
                              "children": [],
                              "data": {
                                "value": "b",
                              },
                              "type": "name",
                            },
                          ],
                          "data": {},
                          "type": "add",
                        },
                      ],
                      "data": {},
                      "type": "parens",
                    },
                  ],
                  "data": {},
                  "type": "pin",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with placeholder 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {},
                  "type": "placeholder",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with record default value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": 4,
                  },
                  "type": "number",
                },
              ],
              "data": {},
              "type": "=",
            },
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with record pattern 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "a",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with record pattern key 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "a",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "b",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": "add",
                    },
                  ],
                  "data": {},
                  "type": "square_brackets",
                },
                {
                  "children": [],
                  "data": {
                    "value": "c",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "@",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with record pattern nested 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [],
                          "data": {
                            "value": "c",
                          },
                          "type": "name",
                        },
                        {
                          "children": [],
                          "data": {
                            "value": "d",
                          },
                          "type": "name",
                        },
                      ],
                      "data": {},
                      "type": ",",
                    },
                  ],
                  "data": {},
                  "type": "parens",
                },
              ],
              "data": {},
              "type": "@",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with record pattern rename 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [],
                  "data": {
                    "value": "c",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": "@",
            },
            {
              "children": [],
              "data": {
                "value": "b",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "object",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with rename 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "a",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "@",
                },
                {
                  "children": [],
                  "data": {
                    "value": "c",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with rest value 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "...",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with rest value first 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "b",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": "...",
                },
                {
                  "children": [],
                  "data": {
                    "value": "a",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with strict pattern 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "a",
                      },
                      "type": "name",
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [],
                              "data": {
                                "value": "b",
                              },
                              "type": "name",
                            },
                          ],
                          "data": {},
                          "type": "object",
                        },
                      ],
                      "data": {},
                      "type": "strict",
                    },
                  ],
                  "data": {},
                  "type": ",",
                },
              ],
              "data": {},
              "type": "parens",
            },
          ],
          "data": {},
          "type": "like",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`pattern matching > with type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [],
                      "data": {
                        "value": "a",
                      },
                      "type": "name",
                    },
                    {
                      "children": [],
                      "data": {
                        "value": "number",
                      },
                      "type": "name",
                    },
                  ],
                  "data": {},
                  "type": ":",
                },
                {
                  "children": [],
                  "data": {
                    "value": "b",
                  },
                  "type": "name",
                },
              ],
              "data": {},
              "type": ",",
            },
          ],
          "data": {},
          "type": "parens",
        },
      ],
      "data": {},
      "type": "is",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "b",
          },
          "type": "name",
        },
      ],
      "data": {
        "descriptor": {
          "name": "a",
          "segments": [],
          "type": "dependency",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import descriptor > import dependency 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "descriptor": {
          "name": "depName",
          "segments": [],
          "type": "dependency",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import descriptor > import project absolute 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "descriptor": {
          "segments": [
            {
              "name": "path",
              "type": "segment",
            },
            {
              "name": "to",
              "type": "segment",
            },
            {
              "name": "folder",
              "type": "segment",
            },
          ],
          "type": "absolute",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import descriptor > import project file 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "descriptor": {
          "segments": [
            {
              "name": "path",
              "type": "segment",
            },
            {
              "name": "to",
              "type": "segment",
            },
            {
              "name": "file.extension",
              "type": "segment",
            },
          ],
          "type": "absolute",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import descriptor > import project relative 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "descriptor": {
          "segments": [
            {
              "name": "relative",
              "type": "segment",
            },
            {
              "name": "path",
              "type": "segment",
            },
            {
              "name": "to",
              "type": "segment",
            },
            {
              "name": "folder",
              "type": "segment",
            },
          ],
          "type": "relative",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import descriptor > import project relative complex 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "descriptor": {
          "segments": [
            {
              "type": "previous",
            },
            {
              "name": "path",
              "type": "segment",
            },
            {
              "name": "to",
              "type": "segment",
            },
            {
              "name": "folder",
              "type": "segment",
            },
          ],
          "type": "relative",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > import descriptor > import project root 1`] = `
{
  "children": [
    {
      "children": [],
      "data": {
        "descriptor": {
          "segments": [],
          "type": "absolute",
        },
      },
      "type": "import",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > module > export declaration 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "export",
        },
        {
          "children": [],
          "data": {
            "value": 123,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "module",
}
`;

exports[`programs > module > export default 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "args",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": 1,
              },
              "type": "number",
            },
          ],
          "data": {
            "isTopFunction": true,
          },
          "type": "func",
        },
      ],
      "data": {},
      "type": "export",
    },
  ],
  "data": {},
  "type": "module",
}
`;

exports[`programs > script > dynamic async import 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "b",
          },
          "type": "name",
        },
        {
          "children": [
            {
              "children": [],
              "data": {
                "descriptor": {
                  "name": "a",
                  "segments": [],
                  "type": "dependency",
                },
              },
              "type": "import",
            },
          ],
          "data": {},
          "type": "async",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`programs > script > dynamic import 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "b",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "descriptor": {
              "name": "a",
              "segments": [],
              "type": "dependency",
            },
          },
          "type": "import",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`types > declaration with type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
            {
              "children": [],
              "data": {
                "value": "number",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": ":",
        },
        {
          "children": [],
          "data": {
            "value": 1,
          },
          "type": "number",
        },
      ],
      "data": {},
      "type": ":=",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`types > type cast 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "number",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "as",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`types > type coalesce 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
        {
          "children": [],
          "data": {
            "value": "number",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": ":>",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`types > typeof 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [],
          "data": {
            "value": "x",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "typeof",
    },
  ],
  "data": {},
  "type": "script",
}
`;

exports[`types > typeof value is type 1`] = `
{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [],
              "data": {
                "value": "x",
              },
              "type": "name",
            },
          ],
          "data": {},
          "type": "typeof",
        },
        {
          "children": [],
          "data": {
            "value": "number",
          },
          "type": "name",
        },
      ],
      "data": {},
      "type": "==",
    },
  ],
  "data": {},
  "type": "script",
}
`;
